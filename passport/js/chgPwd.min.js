device.desktop()&&(location.href="http://passport.tpooo.net/Resetpwd/index.html"),$(function(){function e(){return/^1[3578]\d{9}$/.test($(".pwd-mobile").val())?($(".mobile-invalid-tip").addClass("hide"),!0):($(".mobile-invalid-tip").removeClass("hide"),!1)}function t(){return/^\d{6}$/.test($(".pwd-verify-code").val())?($(".code-invalid-tip").addClass("hide"),!0):($(".code-invalid-tip").removeClass("hide"),!1)}function i(){var e=$(".new-pwd").val();return/^[a-zA-Z0-9~!@#\$%\^&\*\-_\+=\.]{6,20}$/.test(e)?($(".input-pwd-tip").addClass("hide"),!0):($(".input-pwd-tip").removeClass("hide"),!1)}function o(){var e=$(".send-code-btn"),t=60;e.attr("disabled","disabled").text(t+"秒").addClass("btn-disable");var i=setInterval(function(){t--,e.text(t+"秒"),0===t&&(clearInterval(i),e.removeAttr("disabled").text("获取验证码").removeClass("btn-disable"))},1e3)}function d(e,t,i,o){$(".full-layer").show(),$.ajax({url:"http://passport.tpooo.net/uc_client/send.php",type:"POST",dataType:"json",data:{url:e,method:"POST",datas:JSON.stringify(t)}}).done(function(e){$(".full-layer").hide(),1===e.status?i(e):alert(e.message||"未知错误,请稍后再试.")}).fail(function(e){$(".full-layer").hide(),o?o(e):alert("服务器繁忙,请稍后再试.")})}$(".pwd-verify-code").blur(function(){t()}),$(".send-code-btn").click(function(){e()&&d("http://i.tpooo.net/api/wap/sendSms",{mobile:$(".pwd-mobile").val(),type:3},function(e){o()})}),$(".check-code-btn").click(function(){if(e()&&t()){var i=$(".pwd-mobile").val(),o=$(".pwd-verify-code").val();d("http://i.tpooo.net/api/wap/checkVerify",{mobile:i,type:3,verifyCode:o},function(e){sessionStorage.setItem("chgPwdMobile",i),sessionStorage.setItem("chgPwdVerifyCode",o),location.href="/m/Resetpwd/chg_pwd_submit.php"})}}),$(".chg-pwd-submit-btn").click(function(){var e=sessionStorage.getItem("chgPwdMobile"),t=sessionStorage.getItem("chgPwdVerifyCode"),o=$(".new-pwd").val();return e&&t?void(i()&&d("http://i.tpooo.net/api/wap/resetPwd",{mobile:e,verifyCode:t,password:o},function(e){location.href="/m/Users/login.php"})):void alert("手机号码或验证码不存在,请重新输入.")})});